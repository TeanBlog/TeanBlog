"use strict";$(function(){var t=new Cookie,e=new Message,a={title:$("#article-title")[0]},i=function(){var t=new Validator;return t.add(a.title,[{strategy:"isNonEmpty",errorMsg:"标题不能为空"},{strategy:"max:100",errorMsg:"标题不能超过 100 个字"}]),t.start()},r=editormd("editormd",{width:"100%",height:"80vh",path:"/public/lib/editor.md-lib/",placeholder:"使用 TeanBlog 开启你的写作之旅吧~",toolbarIcons:function(){return["undo","redo","bold","del","italic","quote","ucwords","uppercase","lowercase","h1","h2","h3","list-ul","list-ol","hr","link","reference-link","image","code","code-block","table","datetime","html-entities","pagebreak","watch","preview","clear","search"]},editorTheme:"neo",previewTheme:"neo",watch:!1});$("#article-save").click(function(){var a=i(),n={title:$("#article-title").val(),content:r.getMarkdown()};return a?(e.warning(a),!1):n.content.trim().length?void $.ajax({type:"POST",url:"/api/admin/article/add",headers:{Authorization:t.get("TEAN_ADMIN")},contentType:"application/json",dataType:"json",data:JSON.stringify(n),success:function(){window.location.href="/admin/article/manage/1"},error:function(t){t.status>400&&(window.href="/admin/login");var a="";a=t.responseJSON.msg?t.responseJSON.msg:t.status+": "+t.statusText,e.error(a)}}):(e.warning("文章内容不能为空"),!1)}),$("#article-update").click(function(a){var n=i(),o=a.target.attributes["data-id"].value,s={title:$("#article-title").val(),content:r.getMarkdown()};return console.log($("#article-title").val()),n?(e.warning(n),!1):s.content.trim().length?void $.ajax({type:"PATCH",url:"/api/admin/article?id="+o,headers:{Authorization:t.get("TEAN_ADMIN")},contentType:"application/json",dataType:"json",data:JSON.stringify(s),success:function(){window.location.href="/admin/article/manage/1"},error:function(t){t.status>400&&(window.href="/admin/login");var a="";a=t.responseJSON.msg?t.responseJSON.msg:t.status+": "+t.statusText,e.error(a)}}):(e.warning("文章内容不能为空"),!1)})});