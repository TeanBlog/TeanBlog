"use strict";$(function(){var e=new Message,t=document.querySelector("#login-form");$(".btn").click(function(r){r.preventDefault();var a,s=((a=new Validator).add(t.email,[{strategy:"isNonEmpty",errorMsg:"邮箱不能为空"},{strategy:"isEmail",errorMsg:"邮箱地址不正确"}]),a.add(t.password,[{strategy:"isNonEmpty",errorMsg:"密码不能为空"}]),a.start());if(s)return e.warning(s),!1;$(".btn").attr("disabled",!0).text("登录中...");var n={email:$("#email").val(),password:$("#password").val(),rememberMe:$("#rememberMe")[0].checked};$.ajax({type:"POST",url:"/api/login",contentType:"application/json; charset=UTF-8",data:JSON.stringify(n),success:function(){window.location.href="/admin/article/new"},error:function(t){var r="";r=t.responseJSON.msg?t.responseJSON.msg:t.status+": "+t.statusText,e.error(r)},complete:function(){$(".btn").attr("disabled",!1).text("登录")}})})});